!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.perspective=e():t.perspective=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=109)}([function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")()}).call(this,r(42))},function(t,e,r){var n=r(0),o=r(48),i=r(2),a=r(31),s=r(51),u=r(71),c=o("wks"),f=n.Symbol,l=u?f:f&&f.withoutSetter||a;t.exports=function(t){return i(c,t)||(s&&i(f,t)?c[t]=f[t]:c[t]=l("Symbol."+t)),c[t]}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(5),o=r(7),i=r(16);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(4);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(5),o=r(44),i=r(9),a=r(27),s=Object.defineProperty;e.f=n?s:function(t,e,r){if(i(t),e=a(e,!0),i(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(10),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,r){var n=r(6);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(0),o=r(3),i=r(2),a=r(28),s=r(46),u=r(20),c=u.get,f=u.enforce,l=String(String).split("String");(t.exports=function(t,e,r,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof e||i(r,"name")||o(r,"name",e),f(r).source=l.join("string"==typeof e?e:"")),t!==n?(u?!p&&t[e]&&(c=!0):delete t[e],c?t[e]=r:o(t,e,r)):c?t[e]=r:a(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(t,e,r){var n=r(19);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(0),o=r(75),i=r(76),a=r(3),s=r(1),u=s("iterator"),c=s("toStringTag"),f=i.values;for(var l in o){var p=n[l],d=p&&p.prototype;if(d){if(d[u]!==f)try{a(d,u,f)}catch(t){d[u]=f}if(d[c]||a(d,c,l),o[l])for(var h in i)if(d[h]!==i[h])try{a(d,h,i[h])}catch(t){d[h]=i[h]}}}},function(t,e){t.exports={}},function(t,e,r){var n=r(9),o=r(84);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,i){return n(r),o(i),e?t.call(r,i):r.__proto__=i,r}}():void 0)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(43),o=r(19);t.exports=function(t){return n(o(t))}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){var n,o,i,a=r(62),s=r(0),u=r(6),c=r(3),f=r(2),l=r(29),p=r(32),d=s.WeakMap;if(a){var h=new d,y=h.get,g=h.has,_=h.set;n=function(t,e){return _.call(h,t,e),e},o=function(t){return y.call(h,t)||{}},i=function(t){return g.call(h,t)}}else{var v=l("state");p[v]=!0,n=function(t,e){return c(t,v,e),e},o=function(t){return f(t,v)?t[v]:{}},i=function(t){return f(t,v)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},function(t,e,r){var n=r(2),o=r(12),i=r(29),a=r(83),s=i("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),n(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,r){(function(e){r(13);const n=r(85).default,o=r(86).default;function i(t){return t&&"object"==typeof t&&!Array.isArray(t)}function a(t,...e){if(!e.length)return t;const r=e.shift();if(i(t)&&i(r))for(const e in r)i(r[e])?(t[e]||Object.assign(t,{[e]:{}}),a(t[e],r[e])):Object.assign(t,{[e]:r[e]});return a(t,...e)}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){const r={};if(t.exports.get_config().types[e]&&Object.assign(r,t.exports.get_config().types[e]),r.type){const e=t.exports.get_type_config(r.type);return Object.assign(e,r),e}return r},e.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(t){e.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),e.__PERSPECTIVE_CONFIG__=a(n,t)},t.exports.get_config=function(){return e.__PERSPECTIVE_CONFIG__||(e.__PERSPECTIVE_CONFIG__=a(n,"undefined"==typeof window?o():{types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}||{})),e.__PERSPECTIVE_CONFIG__}}).call(this,r(42))},function(t,e,r){"use strict";r(13),r(41);const n=new WeakMap;let o=0;function i(t,e){return function(){let r,o=()=>{},i=Array.prototype.slice.call(arguments,0,arguments.length);for(let t=i.length-1;t>=0;t--)"function"==typeof i[t]&&(r=i.splice(t,1)[0]);const a=n.get(r);n.delete(r);let s={cmd:e||"view_method",name:this._name,method:t,args:i,subscribe:!0,callback_id:a};this._worker.post(s,r,o),this._worker.unsubscribe(e,r)}}function a(t,e){return function(){let r,i=()=>{},a=Array.prototype.slice.call(arguments,0,arguments.length);for(let t=a.length-1;t>=0;t--)"function"==typeof a[t]&&(r=a.splice(t,1)[0]);o++,n.set(r,o);let s={cmd:e||"view_method",name:this._name,method:t,args:a,subscribe:!0,callback_id:o};this._worker.post(s,r,i,!0)}}function s(t,e){return function(){var r=Array.prototype.slice.call(arguments,0,arguments.length);return new Promise(function(n,o){var i={cmd:e||"view_method",name:this._name,method:t,args:r,subscribe:!1};this._worker.post(i,n,o)}.bind(this))}}function u(t){let e=t;do{for(const r of Object.getOwnPropertyNames(e)){const e=t[r];"constructor"!==r&&"function"==typeof e&&(t[r]=e.bind(t))}}while(e=e!==Object&&Object.getPrototypeOf(e))}r(87);function c(t,e,r){this._worker=t,this._name=Math.random()+"";var n={cmd:"view",view_name:this._name,table_name:e,config:r};this._worker.post(n),u(this)}function f(t,e,r){this._worker=t;let n=r.name||Math.random()+"";if(this._name=n,u(this),e.to_arrow){var o={cmd:"table",name:n,args:[],options:r||{}};this._worker.post(o),e.to_arrow().then(t=>{var o={cmd:"table",name:n,args:[t],options:r||{}};this._worker.post(o),e.on_update(t=>{this.update(t.delta)},{mode:"row"})})}else{o={cmd:"table",name:n,args:[e],options:r||{}};this._worker.post(o)}}function l(t,e){this._worker=t,this._name=e}String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return!1;var o,i,a=0|e,s=Math.max(a>=0?a:n-Math.abs(a),0);for(;s<n;){if((o=r[s])===(i=t)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;s++}return!1}}),c.prototype,c.prototype.get_config=s("get_config"),c.prototype.to_json=s("to_json"),c.prototype.to_arrow=s("to_arrow"),c.prototype.to_columns=s("to_columns"),c.prototype.to_csv=s("to_csv"),c.prototype.schema=s("schema"),c.prototype.computed_schema=s("computed_schema"),c.prototype.column_paths=s("column_paths"),c.prototype.num_columns=s("num_columns"),c.prototype.num_rows=s("num_rows"),c.prototype.set_depth=s("set_depth"),c.prototype.get_row_expanded=s("get_row_expanded"),c.prototype.expand=s("expand"),c.prototype.collapse=s("collapse"),c.prototype.delete=s("delete"),c.prototype.col_to_js_typed_array=s("col_to_js_typed_array"),c.prototype.on_update=a("on_update","view_method"),c.prototype.remove_update=i("remove_update","view_method"),c.prototype.on_delete=a("on_delete","view_method"),c.prototype.remove_delete=i("remove_delete","view_method"),f.prototype.type="table",l.prototype=f.prototype,f.prototype.view=function(t){return new c(this._worker,this._name,t)},f.prototype.get_index=s("get_index","table_method"),f.prototype.get_limit=s("get_limit","table_method"),f.prototype.make_port=s("make_port","table_method"),f.prototype.remove_port=s("remove_port","table_method"),f.prototype.compute=s("compute","table_method"),f.prototype.schema=s("schema","table_method"),f.prototype.computed_schema=s("computed_schema","table_method"),f.prototype.get_computation_input_types=s("get_computation_input_types","table_method"),f.prototype.get_computed_functions=s("get_computed_functions","table_method"),f.prototype.is_valid_filter=s("is_valid_filter","table_method"),f.prototype.size=s("size","table_method"),f.prototype.columns=s("columns","table_method"),f.prototype.clear=s("clear","table_method"),f.prototype.replace=s("replace","table_method"),f.prototype.delete=s("delete","table_method"),f.prototype.on_delete=a("on_delete","table_method"),f.prototype.remove=s("remove","table_method"),f.prototype.remove_delete=i("remove_delete","table_method"),f.prototype.update=function(t,e){return new Promise((r,n)=>{var o={name:this._name,cmd:"table_method",method:"update",args:[t,e||{}]};this._worker.post(o,r,n,!1)})},f.prototype.execute=function(t){var e={cmd:"table_execute",name:this._name,f:t.toString()};this._worker.post(e)},r.d(e,"a",(function(){return p}));class p{constructor(){this._initialized=!1,this._worker={initialized:{value:!1},transferable:!1,msg_id:0,handlers:{},messages:[]},u(this)}unsubscribe(t,e){for(let t of Object.keys(this._worker.handlers))this._worker.handlers[t].resolve===e&&delete this._worker.handlers[t]}post(t,e,r,n=!1){++this._worker.msg_id,(e||r)&&(this._worker.handlers[this._worker.msg_id]={resolve:e,reject:r,keep_alive:n}),t.id=this._worker.msg_id,this._worker.initialized.value?this.send(t):this._worker.messages.push(()=>this.send(t))}initialize_profile_thread(){this._worker.initialized.value?this.send({id:-1,cmd:"init_profile_thread"}):this._worker.messages.push(()=>this.send({id:-1,cmd:"init_profile_thread"}))}send(){throw new Error("send() not implemented")}open_table(t){return new l(this,t)}_handle(t){if(!this._worker.initialized.value){if(!this._initialized&&"undefined"!=typeof document&&document&&void 0!==typeof window&&window){try{const t=document.createEvent("Event");t.initEvent("perspective-ready",!1,!0),window.dispatchEvent(t)}catch(t){}this._initialized=!0}const e=this._worker.messages;if(this._worker.initialized.value=!0,this._worker.messages=[],e)for(const t in e)e.hasOwnProperty(t)&&e[t]()}if(t.data.id){var e=this._worker.handlers[t.data.id];e&&(t.data.error?e.reject(t.data.error):e.resolve(t.data.data),e.keep_alive||delete this._worker.handlers[t.data.id])}}table(t,e){return new f(this,t,e||{})}terminate(){this._worker.terminate(),this._worker=void 0}}},function(t,e,r){var n=r(57);t.exports=n.publicPath(r.p)+"psp.async.wasm"},function(t,e,r){var n=r(0),o=r(26).f,i=r(3),a=r(11),s=r(28),u=r(63),c=r(68);t.exports=function(t,e){var r,f,l,p,d,h=t.target,y=t.global,g=t.stat;if(r=y?n:g?n[h]||s(h,{}):(n[h]||{}).prototype)for(f in e){if(p=e[f],l=t.noTargetGet?(d=o(r,f))&&d.value:r[f],!c(y?f:h+(g?".":"#")+f,t.forced)&&void 0!==l){if(typeof p==typeof l)continue;u(p,l)}(t.sham||l&&l.sham)&&i(p,"sham",!0),a(r,f,p,t)}}},function(t,e,r){var n=r(5),o=r(61),i=r(16),a=r(17),s=r(27),u=r(2),c=r(44),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=a(t),e=s(e,!0),c)try{return f(t,e)}catch(t){}if(u(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e,r){var n=r(6);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(0),o=r(3);t.exports=function(t,e){try{o(n,t,e)}catch(r){n[t]=e}return e}},function(t,e,r){var n=r(48),o=r(31),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){t.exports=!1},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e){t.exports={}},function(t,e,r){var n=r(65),o=r(0),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t])||i(o[t]):n[t]&&n[t][e]||o[t]&&o[t][e]}},function(t,e,r){var n=r(49),o=r(35).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,r){"use strict";var n,o,i=r(69),a=r(70),s=RegExp.prototype.exec,u=String.prototype.replace,c=s,f=(n=/a/,o=/b*/g,s.call(n,"a"),s.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(f||p||l)&&(c=function(t){var e,r,n,o,a=this,c=l&&a.sticky,d=i.call(a),h=a.source,y=0,g=t;return c&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),g=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(h="(?: "+h+")",g=" "+g,y++),r=new RegExp("^(?:"+h+")",d)),p&&(r=new RegExp("^"+h+"$(?!\\s)",d)),f&&(e=a.lastIndex),n=s.call(c?r:a,g),c?n?(n.input=n.input.slice(y),n[0]=n[0].slice(y),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:f&&n&&(a.lastIndex=a.global?n.index+n[0].length:e),p&&n&&n.length>1&&u.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n}),t.exports=c},function(t,e,r){var n,o=r(9),i=r(78),a=r(35),s=r(32),u=r(80),c=r(45),f=r(29),l=f("IE_PROTO"),p=function(){},d=function(t){return"<script>"+t+"<\/script>"},h=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;h=n?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(n):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var r=a.length;r--;)delete h.prototype[a[r]];return h()};s[l]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(p.prototype=o(t),r=new p,p.prototype=null,r[l]=t):r=h(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(7).f,o=r(2),i=r(1)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){"use strict";var n,o=r(53),i=r(5),a=r(0),s=r(6),u=r(2),c=r(40),f=r(3),l=r(11),p=r(7).f,d=r(21),h=r(15),y=r(1),g=r(31),_=a.Int8Array,v=_&&_.prototype,m=a.Uint8ClampedArray,b=m&&m.prototype,w=_&&d(_),x=v&&d(v),E=Object.prototype,O=E.isPrototypeOf,S=y("toStringTag"),A=g("TYPED_ARRAY_TAG"),T=o&&!!h&&"Opera"!==c(a.opera),k=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P=function(t){return s(t)&&u(I,c(t))};for(n in I)a[n]||(T=!1);if((!T||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},T))for(n in I)a[n]&&h(a[n],w);if((!T||!x||x===E)&&(x=w.prototype,T))for(n in I)a[n]&&h(a[n].prototype,x);if(T&&d(b)!==x&&h(b,x),i&&!u(x,S))for(n in k=!0,p(x,S,{get:function(){return s(this)?this[A]:void 0}}),I)a[n]&&f(a[n],A,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:k&&A,aTypedArray:function(t){if(P(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(h){if(O.call(w,t))return t}else for(var e in I)if(u(I,n)){var r=a[e];if(r&&(t===r||O.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r){if(i){if(r)for(var n in I){var o=a[n];o&&u(o.prototype,t)&&delete o.prototype[t]}x[t]&&!r||l(x,t,r?e:T&&v[t]||e)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(i){if(h){if(r)for(n in I)(o=a[n])&&u(o,t)&&delete o[t];if(w[t]&&!r)return;try{return l(w,t,r?e:T&&_[t]||e)}catch(t){}}for(n in I)!(o=a[n])||o[t]&&!r||l(o,t,e)}},isView:function(t){var e=c(t);return"DataView"===e||u(I,e)},isTypedArray:P,TypedArray:w,TypedArrayPrototype:x}},function(t,e,r){var n=r(93),o=r(18),i=r(1)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=n?o:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?r:a?o(e):"Object"==(n=o(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,r){"use strict";var n=r(59),o=r(9),i=r(12),a=r(8),s=r(10),u=r(19),c=r(72),f=r(74),l=Math.max,p=Math.min,d=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;n("replace",2,(function(t,e,r,n){var g=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_=n.REPLACE_KEEPS_$0,v=g?"$":"$0";return[function(r,n){var o=u(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,o,n):e.call(String(o),r,n)},function(t,n){if(!g&&_||"string"==typeof n&&-1===n.indexOf(v)){var i=r(e,t,this,n);if(i.done)return i.value}var u=o(t),d=String(this),h="function"==typeof n;h||(n=String(n));var y=u.global;if(y){var b=u.unicode;u.lastIndex=0}for(var w=[];;){var x=f(u,d);if(null===x)break;if(w.push(x),!y)break;""===String(x[0])&&(u.lastIndex=c(d,a(u.lastIndex),b))}for(var E,O="",S=0,A=0;A<w.length;A++){x=w[A];for(var T=String(x[0]),k=l(p(s(x.index),d.length),0),I=[],P=1;P<x.length;P++)I.push(void 0===(E=x[P])?E:String(E));var R=x.groups;if(h){var j=[T].concat(I,k,d);void 0!==R&&j.push(R);var N=String(n.apply(void 0,j))}else N=m(T,d,k,I,R,n);k>=S&&(O+=d.slice(S,k)+N,S=k+T.length)}return O+d.slice(S)}];function m(t,r,n,o,a,s){var u=n+t.length,c=o.length,f=y;return void 0!==a&&(a=i(a),f=h),e.call(s,f,(function(e,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var f=+i;if(0===f)return e;if(f>c){var l=d(f/10);return 0===l?e:l<=c?void 0===o[l-1]?i.charAt(1):o[l-1]+i.charAt(1):e}s=o[f-1]}return void 0===s?"":s}))}}))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(4),o=r(18),i="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,r){var n=r(5),o=r(4),i=r(45);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(0),o=r(6),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,r){var n=r(47),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return o.call(t)}),t.exports=n.inspectSource},function(t,e,r){var n=r(0),o=r(28),i=n["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,r){var n=r(30),o=r(47);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var n=r(2),o=r(17),i=r(66).indexOf,a=r(32);t.exports=function(t,e){var r,s=o(t),u=0,c=[];for(r in s)!n(a,r)&&n(s,r)&&c.push(r);for(;e.length>u;)n(s,r=e[u++])&&(~i(c,r)||c.push(r));return c}},function(t,e,r){var n=r(10),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},function(t,e,r){var n=r(4);t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(t,e,r){"use strict";var n,o,i,a=r(21),s=r(3),u=r(2),c=r(1),f=r(30),l=c("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(n=o):p=!0),null==n&&(n={}),f||u(n,l)||s(n,l,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},function(t,e,r){var n=r(10),o=r(8);t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=o(e);if(e!==r)throw RangeError("Wrong length or index");return r}},function(t,e,r){var n=r(103);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){const{currentScript:r}=document;t.exports.path=r?r.src.split("/").slice(0,-1).join("/")+"/":"",t.exports.isCrossOrigin=function(e){if(!(!e||!e.length)){var r=document.createElement("a");return r.href=e,!r.href.startsWith(window.location.origin)}return window.location.origin!==t.exports.path.slice(0,window.location.origin.length)},t.exports.publicPath=function(e){return!(!e||!e.length)?e:t.exports.path},t.exports.BlobWorker=function(t,e){var r=new Blob([t]),n=window.URL.createObjectURL(r),o=new Worker(n);e&&e(o)},t.exports.XHRWorker=function(e,r){var n=new XMLHttpRequest;n.addEventListener("load",(function(){t.exports.BlobWorker(n.responseText,r)}),n),n.open("get",e,!0),n.send()}},function(t,e,r){t.exports=function(){var t=r(57),e=t.publicPath(r.p)+"perspective.wasm.worker.js";return t.isCrossOrigin(r.p)?new Promise((function(r){t.XHRWorker(e,r)})):new Promise((function(t){t(new Worker(e))}))}},function(t,e,r){"use strict";r(60);var n=r(11),o=r(4),i=r(1),a=r(36),s=r(3),u=i("species"),c=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f="$0"==="a".replace(/./,"$0"),l=i("replace"),p=!!/./[l]&&""===/./[l]("a","$0"),d=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,l){var h=i(t),y=!o((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),g=y&&!o((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return e=!0,null},r[h](""),!e}));if(!y||!g||"replace"===t&&(!c||!f||p)||"split"===t&&!d){var _=/./[h],v=r(h,""[t],(function(t,e,r,n,o){return e.exec===a?y&&!o?{done:!0,value:_.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),m=v[0],b=v[1];n(String.prototype,t,m),n(RegExp.prototype,h,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}l&&s(RegExp.prototype[h],"sham",!0)}},function(t,e,r){"use strict";var n=r(25),o=r(36);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(t,e,r){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:n},function(t,e,r){var n=r(0),o=r(46),i=n.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e,r){var n=r(2),o=r(64),i=r(26),a=r(7);t.exports=function(t,e){for(var r=o(e),s=a.f,u=i.f,c=0;c<r.length;c++){var f=r[c];n(t,f)||s(t,f,u(e,f))}}},function(t,e,r){var n=r(33),o=r(34),i=r(67),a=r(9);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(a(t)),r=i.f;return r?e.concat(r(t)):e}},function(t,e,r){var n=r(0);t.exports=n},function(t,e,r){var n=r(17),o=r(8),i=r(50),a=function(t){return function(e,r,a){var s,u=n(e),c=o(u.length),f=i(a,c);if(t&&r!=r){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===r)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(4),o=/#|\.prototype\./,i=function(t,e){var r=s[a(t)];return r==c||r!=u&&("function"==typeof e?n(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},s=i.data={},u=i.NATIVE="N",c=i.POLYFILL="P";t.exports=i},function(t,e,r){"use strict";var n=r(9);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){"use strict";var n=r(4);function o(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,r){var n=r(51);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,r){"use strict";var n=r(73).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){var n=r(10),o=r(19),i=function(t){return function(e,r){var i,a,s=String(o(e)),u=n(r),c=s.length;return u<0||u>=c?t?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):i:t?s.slice(u,u+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e,r){var n=r(18),o=r(36);t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var i=r.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,r){"use strict";var n=r(17),o=r(77),i=r(14),a=r(20),s=r(81),u=a.set,c=a.getterFor("Array Iterator");t.exports=s(Array,"Array",(function(t,e){u(this,{type:"Array Iterator",target:n(t),index:0,kind:e})}),(function(){var t=c(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,r){var n=r(1),o=r(37),i=r(7),a=n("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e,r){var n=r(5),o=r(7),i=r(9),a=r(79);t.exports=n?Object.defineProperties:function(t,e){i(t);for(var r,n=a(e),s=n.length,u=0;s>u;)o.f(t,r=n[u++],e[r]);return t}},function(t,e,r){var n=r(49),o=r(35);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,r){var n=r(33);t.exports=n("document","documentElement")},function(t,e,r){"use strict";var n=r(25),o=r(82),i=r(21),a=r(15),s=r(38),u=r(3),c=r(11),f=r(1),l=r(30),p=r(14),d=r(52),h=d.IteratorPrototype,y=d.BUGGY_SAFARI_ITERATORS,g=f("iterator"),_=function(){return this};t.exports=function(t,e,r,f,d,v,m){o(r,e,f);var b,w,x,E=function(t){if(t===d&&k)return k;if(!y&&t in A)return A[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},O=e+" Iterator",S=!1,A=t.prototype,T=A[g]||A["@@iterator"]||d&&A[d],k=!y&&T||E(d),I="Array"==e&&A.entries||T;if(I&&(b=i(I.call(new t)),h!==Object.prototype&&b.next&&(l||i(b)===h||(a?a(b,h):"function"!=typeof b[g]&&u(b,g,_)),s(b,O,!0,!0),l&&(p[O]=_))),"values"==d&&T&&"values"!==T.name&&(S=!0,k=function(){return T.call(this)}),l&&!m||A[g]===k||u(A,g,k),p[e]=k,d)if(w={values:E("values"),keys:v?k:E("keys"),entries:E("entries")},m)for(x in w)!y&&!S&&x in A||c(A,x,w[x]);else n({target:e,proto:!0,forced:y||S},w);return w}},function(t,e,r){"use strict";var n=r(52).IteratorPrototype,o=r(37),i=r(16),a=r(38),s=r(14),u=function(){return this};t.exports=function(t,e,r){var c=e+" Iterator";return t.prototype=o(n,{next:i(1,r)}),a(t,c,!1,!0),s[c]=u,t}},function(t,e,r){var n=r(4);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,r){var n=r(6);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e){t.exports.default={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}},function(t,e){t.exports.default=function(){}},function(t,e){t.exports=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}},function(t,e,r){"use strict";r.r(e),r.d(e,"WebSocketClient",(function(){return i}));r(89);var n=r(23);const o=3e4;class i extends n.a{constructor(t){super(),this._ws=t,this._ws.binaryType="arraybuffer",this._full_binary,this._total_chunk_length=0,this._pending_binary_length=0,this._ws.onopen=()=>{this.send({id:-1,cmd:"init"})};const e=()=>{this._ws.send("ping"),setTimeout(e,o)};setTimeout(e,o),this._ws.onmessage=t=>{if("pong"!==t.data)if(this._pending_binary){let e=t.data;if(this._full_binary.set(new Uint8Array(e),this._total_chunk_length),this._total_chunk_length+=e.byteLength,this._total_chunk_length!==this._pending_binary_length)return;e=this._full_binary.buffer;let r={data:{id:this._pending_binary,data:e}};if(void 0!==this._pending_port_id){const t={port_id:this._pending_port_id,delta:e};r.data.data=t}this._handle(r),delete this._pending_binary,delete this._pending_binary_length,delete this._pending_port_id,this._total_chunk_length=0,this._full_binary=null}else(t=JSON.parse(t.data)).binary_length?(this._pending_binary=t.id,this._pending_binary_length=t.binary_length,t.data&&void 0!==t.data.port_id&&(this._pending_port_id=t.data.port_id),this._full_binary=new Uint8Array(this._pending_binary_length)):this._handle({data:t})}}send(t){if(t.args&&t.args.length>0&&t.args[0]instanceof ArrayBuffer&&void 0!==t.args[0].byteLength){const e=t;return t.binary_length=t.args[0].byteLength,this._ws.send(JSON.stringify(e)),void this._ws.send(t.args[0])}this._ws.send(JSON.stringify(t))}terminate(){return new Promise(t=>{this._ws.onclose=t,this._ws.close()})}}},function(t,e,r){r(90)("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){"use strict";var n=r(25),o=r(0),i=r(5),a=r(91),s=r(39),u=r(94),c=r(54),f=r(16),l=r(3),p=r(8),d=r(55),h=r(98),y=r(27),g=r(2),_=r(40),v=r(6),m=r(37),b=r(15),w=r(34).f,x=r(100),E=r(104).forEach,O=r(107),S=r(7),A=r(26),T=r(20),k=r(108),I=T.get,P=T.set,R=S.f,j=A.f,N=Math.round,L=o.RangeError,M=u.ArrayBuffer,C=u.DataView,F=s.NATIVE_ARRAY_BUFFER_VIEWS,U=s.TYPED_ARRAY_TAG,D=s.TypedArray,W=s.TypedArrayPrototype,B=s.aTypedArrayConstructor,G=s.isTypedArray,V=function(t,e){for(var r=0,n=e.length,o=new(B(t))(n);n>r;)o[r]=e[r++];return o},q=function(t,e){R(t,e,{get:function(){return I(this)[e]}})},Y=function(t){var e;return t instanceof M||"ArrayBuffer"==(e=_(t))||"SharedArrayBuffer"==e},z=function(t,e){return G(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},$=function(t,e){return z(t,e=y(e,!0))?f(2,t[e]):j(t,e)},H=function(t,e,r){return!(z(t,e=y(e,!0))&&v(r)&&g(r,"value"))||g(r,"get")||g(r,"set")||r.configurable||g(r,"writable")&&!r.writable||g(r,"enumerable")&&!r.enumerable?R(t,e,r):(t[e]=r.value,t)};i?(F||(A.f=$,S.f=H,q(W,"buffer"),q(W,"byteOffset"),q(W,"byteLength"),q(W,"length")),n({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:$,defineProperty:H}),t.exports=function(t,e,r){var i=t.match(/\d+$/)[0]/8,s=t+(r?"Clamped":"")+"Array",u="get"+t,f="set"+t,y=o[s],g=y,_=g&&g.prototype,S={},A=function(t,e){R(t,e,{get:function(){return function(t,e){var r=I(t);return r.view[u](e*i+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var o=I(t);r&&(n=(n=N(n))<0?0:n>255?255:255&n),o.view[f](e*i+o.byteOffset,n,!0)}(this,e,t)},enumerable:!0})};F?a&&(g=e((function(t,e,r,n){return c(t,g,s),k(v(e)?Y(e)?void 0!==n?new y(e,h(r,i),n):void 0!==r?new y(e,h(r,i)):new y(e):G(e)?V(g,e):x.call(g,e):new y(d(e)),t,g)})),b&&b(g,D),E(w(y),(function(t){t in g||l(g,t,y[t])})),g.prototype=_):(g=e((function(t,e,r,n){c(t,g,s);var o,a,u,f=0,l=0;if(v(e)){if(!Y(e))return G(e)?V(g,e):x.call(g,e);o=e,l=h(r,i);var y=e.byteLength;if(void 0===n){if(y%i)throw L("Wrong length");if((a=y-l)<0)throw L("Wrong length")}else if((a=p(n)*i)+l>y)throw L("Wrong length");u=a/i}else u=d(e),o=new M(a=u*i);for(P(t,{buffer:o,byteOffset:l,byteLength:a,length:u,view:new C(o)});f<u;)A(t,f++)})),b&&b(g,D),_=g.prototype=m(W)),_.constructor!==g&&l(_,"constructor",g),U&&l(_,U,s),S[s]=g,n({global:!0,forced:g!=y,sham:!F},S),"BYTES_PER_ELEMENT"in g||l(g,"BYTES_PER_ELEMENT",i),"BYTES_PER_ELEMENT"in _||l(_,"BYTES_PER_ELEMENT",i),O(s)}):t.exports=function(){}},function(t,e,r){var n=r(0),o=r(4),i=r(92),a=r(39).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,u=n.Int8Array;t.exports=!a||!o((function(){u(1)}))||!o((function(){new u(-1)}))||!i((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||o((function(){return 1!==new u(new s(2),1,void 0).length}))},function(t,e,r){var n=r(1)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},function(t,e,r){var n={};n[r(1)("toStringTag")]="z",t.exports="[object z]"===String(n)},function(t,e,r){"use strict";var n=r(0),o=r(5),i=r(53),a=r(3),s=r(95),u=r(4),c=r(54),f=r(10),l=r(8),p=r(55),d=r(96),h=r(21),y=r(15),g=r(34).f,_=r(7).f,v=r(97),m=r(38),b=r(20),w=b.get,x=b.set,E=n.ArrayBuffer,O=E,S=n.DataView,A=S&&S.prototype,T=Object.prototype,k=n.RangeError,I=d.pack,P=d.unpack,R=function(t){return[255&t]},j=function(t){return[255&t,t>>8&255]},N=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},L=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},M=function(t){return I(t,23,4)},C=function(t){return I(t,52,8)},F=function(t,e){_(t.prototype,e,{get:function(){return w(this)[e]}})},U=function(t,e,r,n){var o=p(r),i=w(t);if(o+e>i.byteLength)throw k("Wrong index");var a=w(i.buffer).bytes,s=o+i.byteOffset,u=a.slice(s,s+e);return n?u:u.reverse()},D=function(t,e,r,n,o,i){var a=p(r),s=w(t);if(a+e>s.byteLength)throw k("Wrong index");for(var u=w(s.buffer).bytes,c=a+s.byteOffset,f=n(+o),l=0;l<e;l++)u[c+l]=f[i?l:e-l-1]};if(i){if(!u((function(){E(1)}))||!u((function(){new E(-1)}))||u((function(){return new E,new E(1.5),new E(NaN),"ArrayBuffer"!=E.name}))){for(var W,B=(O=function(t){return c(this,O),new E(p(t))}).prototype=E.prototype,G=g(E),V=0;G.length>V;)(W=G[V++])in O||a(O,W,E[W]);B.constructor=O}y&&h(A)!==T&&y(A,T);var q=new S(new O(2)),Y=A.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||s(A,{setInt8:function(t,e){Y.call(this,t,e<<24>>24)},setUint8:function(t,e){Y.call(this,t,e<<24>>24)}},{unsafe:!0})}else O=function(t){c(this,O,"ArrayBuffer");var e=p(t);x(this,{bytes:v.call(new Array(e),0),byteLength:e}),o||(this.byteLength=e)},S=function(t,e,r){c(this,S,"DataView"),c(t,O,"DataView");var n=w(t).byteLength,i=f(e);if(i<0||i>n)throw k("Wrong offset");if(i+(r=void 0===r?n-i:l(r))>n)throw k("Wrong length");x(this,{buffer:t,byteLength:r,byteOffset:i}),o||(this.buffer=t,this.byteLength=r,this.byteOffset=i)},o&&(F(O,"byteLength"),F(S,"buffer"),F(S,"byteLength"),F(S,"byteOffset")),s(S.prototype,{getInt8:function(t){return U(this,1,t)[0]<<24>>24},getUint8:function(t){return U(this,1,t)[0]},getInt16:function(t){var e=U(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=U(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return L(U(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return L(U(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return P(U(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return P(U(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){D(this,1,t,R,e)},setUint8:function(t,e){D(this,1,t,R,e)},setInt16:function(t,e){D(this,2,t,j,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){D(this,2,t,j,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){D(this,4,t,N,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){D(this,4,t,N,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){D(this,4,t,M,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){D(this,8,t,C,e,arguments.length>2?arguments[2]:void 0)}});m(O,"ArrayBuffer"),m(S,"DataView"),t.exports={ArrayBuffer:O,DataView:S}},function(t,e,r){var n=r(11);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},function(t,e){var r=Math.abs,n=Math.pow,o=Math.floor,i=Math.log,a=Math.LN2;t.exports={pack:function(t,e,s){var u,c,f,l=new Array(s),p=8*s-e-1,d=(1<<p)-1,h=d>>1,y=23===e?n(2,-24)-n(2,-77):0,g=t<0||0===t&&1/t<0?1:0,_=0;for((t=r(t))!=t||t===1/0?(c=t!=t?1:0,u=d):(u=o(i(t)/a),t*(f=n(2,-u))<1&&(u--,f*=2),(t+=u+h>=1?y/f:y*n(2,1-h))*f>=2&&(u++,f/=2),u+h>=d?(c=0,u=d):u+h>=1?(c=(t*f-1)*n(2,e),u+=h):(c=t*n(2,h-1)*n(2,e),u=0));e>=8;l[_++]=255&c,c/=256,e-=8);for(u=u<<e|c,p+=e;p>0;l[_++]=255&u,u/=256,p-=8);return l[--_]|=128*g,l},unpack:function(t,e){var r,o=t.length,i=8*o-e-1,a=(1<<i)-1,s=a>>1,u=i-7,c=o-1,f=t[c--],l=127&f;for(f>>=7;u>0;l=256*l+t[c],c--,u-=8);for(r=l&(1<<-u)-1,l>>=-u,u+=e;u>0;r=256*r+t[c],c--,u-=8);if(0===l)l=1-s;else{if(l===a)return r?NaN:f?-1/0:1/0;r+=n(2,e),l-=s}return(f?-1:1)*r*n(2,l-e)}}},function(t,e,r){"use strict";var n=r(12),o=r(50),i=r(8);t.exports=function(t){for(var e=n(this),r=i(e.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,r),u=a>2?arguments[2]:void 0,c=void 0===u?r:o(u,r);c>s;)e[s++]=t;return e}},function(t,e,r){var n=r(99);t.exports=function(t,e){var r=n(t);if(r%e)throw RangeError("Wrong offset");return r}},function(t,e,r){var n=r(10);t.exports=function(t){var e=n(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(t,e,r){var n=r(12),o=r(8),i=r(101),a=r(102),s=r(56),u=r(39).aTypedArrayConstructor;t.exports=function(t){var e,r,c,f,l,p,d=n(t),h=arguments.length,y=h>1?arguments[1]:void 0,g=void 0!==y,_=i(d);if(null!=_&&!a(_))for(p=(l=_.call(d)).next,d=[];!(f=p.call(l)).done;)d.push(f.value);for(g&&h>2&&(y=s(y,arguments[2],2)),r=o(d.length),c=new(u(this))(r),e=0;r>e;e++)c[e]=g?y(d[e],e):d[e];return c}},function(t,e,r){var n=r(40),o=r(14),i=r(1)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n=r(1),o=r(14),i=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){var n=r(56),o=r(43),i=r(12),a=r(8),s=r(105),u=[].push,c=function(t){var e=1==t,r=2==t,c=3==t,f=4==t,l=6==t,p=5==t||l;return function(d,h,y,g){for(var _,v,m=i(d),b=o(m),w=n(h,y,3),x=a(b.length),E=0,O=g||s,S=e?O(d,x):r?O(d,0):void 0;x>E;E++)if((p||E in b)&&(v=w(_=b[E],E,m),t))if(e)S[E]=v;else if(v)switch(t){case 3:return!0;case 5:return _;case 6:return E;case 2:u.call(S,_)}else if(f)return!1;return l?-1:c||f?f:S}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(t,e,r){var n=r(6),o=r(106),i=r(1)("species");t.exports=function(t,e){var r;return o(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},function(t,e,r){var n=r(18);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";var n=r(33),o=r(7),i=r(1),a=r(5),s=i("species");t.exports=function(t){var e=n(t),r=o.f;a&&e&&!e[s]&&r(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n=r(6),o=r(15);t.exports=function(t,e,r){var i,a;return o&&"function"==typeof(i=e.constructor)&&i!==r&&n(a=i.prototype)&&a!==r.prototype&&o(t,a),t}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"CONFIG_ALIASES",(function(){return o})),r.d(n,"CONFIG_VALID_KEYS",(function(){return i})),r.d(n,"SORT_ORDERS",(function(){return u})),r.d(n,"SORT_ORDER_IDS",(function(){return c})),r.d(n,"TYPE_AGGREGATES",(function(){return f})),r.d(n,"FILTER_OPERATORS",(function(){return l})),r.d(n,"COLUMN_SEPARATOR_STRING",(function(){return g})),r.d(n,"TYPE_FILTERS",(function(){return _}));r(41),r(13);const o={row_pivot:"row_pivots","row-pivot":"row_pivots","row-pivots":"row_pivots",col_pivot:"column_pivots",col_pivots:"column_pivots",column_pivot:"column_pivots","column-pivot":"column_pivots","column-pivots":"column_pivots",filters:"filter",sorts:"sort"},i=["viewport","row_pivots","column_pivots","aggregates","columns","filter","sort","computed_columns","row_pivot_depth","filter_op"],a=["any","avg","abs sum","count","distinct count","dominant","first by index","last by index","last","high","low","mean","median","pct sum parent","pct sum grand total","sum","sum abs","sum not null","unique"],s=["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique"],u=["none","asc","desc","col asc","col desc","asc abs","desc abs","col asc abs","col desc abs"],c=[2,0,1,0,1,3,4,3,4],f={string:s,float:a,integer:a,boolean:["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique","and","or"],datetime:s,date:s},l={lessThan:"<",greaterThan:">",equals:"==",lessThanOrEquals:"<=",greaterThanOrEquals:">=",doesNotEqual:"!=",isNull:"is null",isNotNull:"is not null",isIn:"in",isNotIn:"not in",contains:"contains",bitwiseAnd:"&",bitwiseOr:"|",and:"and",or:"or",beginsWith:"begins with",endsWith:"ends with"},p=[l.bitwiseAnd,l.bitwiseOr,l.equals,l.doesNotEqual,l.or,l.and,l.isNull,l.isNotNull],d=[l.lessThan,l.greaterThan,l.equals,l.lessThanOrEquals,l.greaterThanOrEquals,l.doesNotEqual,l.isNull,l.isNotNull],h=[l.equals,l.contains,l.doesNotEqual,l.isIn,l.isNotIn,l.beginsWith,l.endsWith,l.isNull,l.isNotNull],y=[l.lessThan,l.greaterThan,l.equals,l.lessThanOrEquals,l.greaterThanOrEquals,l.doesNotEqual,l.isNull,l.isNotNull],g="|",_={string:h,float:d,integer:d,boolean:p,datetime:y,date:y};var v=r(22),m=r(23),b=r(58),w=r.n(b),x=r(24),E=r.n(x);const{WebSocketClient:O}=r(88),S=new class{_fetch(t){return new Promise(e=>{let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{e(r.response)},r.send(null)})}worker(){return w()()}async wasm(){return E.a instanceof ArrayBuffer?(console.warn('Perspective has been compiled in INLINE mode.  While Perspective\'s runtime performance is not affected, you may see smaller assets size and faster engine initial load time using "@finos/perspective-webpack-plugin" to build your application.\n\nhttps://perspective.finos.org/docs/md/js.html'),this._wasm=E.a):this._wasm=await this._fetch(E.a),this._wasm}};class A extends m.a{constructor(t){t&&Object(v.override_config)(t),super(),this.register()}async register(){let t;const e={cmd:"init",config:Object(v.get_config)()};if("undefined"==typeof WebAssembly)throw new Error("WebAssembly not supported. Support for ASM.JS has been removed as of 0.3.1.");for(var r in[t,e.buffer]=await Promise.all([S.worker(),S.wasm()]),this._worker)t[r]=this._worker[r];this._worker=t,this._worker.addEventListener("message",this._handle.bind(this)),this._worker.postMessage(e),this._detect_transferable()}send(t){this._worker.transferable&&t.args&&t.args[0]instanceof ArrayBuffer?this._worker.postMessage(t,[t.args[0]]):this._worker.postMessage(t)}terminate(){this._worker.terminate(),this._worker=void 0}_detect_transferable(){var t=new ArrayBuffer(1);this._worker.postMessage(t,[t]),this._worker.transferable=0===t.byteLength,this._worker.transferable?console.log("Transferable support detected"):console.warn("Transferable support not detected")}}const T=function(){let t,e;return{getInstance:function(r){void 0===t&&(t=new A(r));const n=JSON.stringify(r);if(e&&n!==e)throw new Error("Confiuration object for shared_worker() has changed - this is probably a bug in your application.");return e=n,t}}}();document.currentScript&&document.currentScript.hasAttribute("preload")&&T.getInstance();const k={override:t=>S.set(t),worker:t=>new A(t),websocket:(t=window.location.origin.replace("http","ws"))=>new O(new WebSocket(t)),shared_worker:t=>T.getInstance(t)};for(let t of Object.keys(n))k[t]=n[t];e.default=k}]).default}));
//# sourceMappingURL=perspective.js.map